<app-page-header
  iconClass="bi-clipboard2-data-fill" title="Tarefas" description="Página de gerenciamento das tarefas"
  [showButton]="true" textButton="Novo" (buttonEvent)="onButtonClick()"
></app-page-header>

<accordion id="accordion-filter" [isAnimated]="true" class="pt-3 border-0">
  <accordion-group heading="Filtros" [isOpen]="true">
    <form>
      <div class="row g-3 align-items-center">
        <div class="col">
          <label for="list" class="col-form-label">Lista</label>
          <select class="form-select" aria-label="Default select example" id="list">
            <option selected>Open this select menu</option>
            <option value="1">One</option>
            <option value="2">Two</option>
            <option value="3">Three</option>
          </select>
        </div>
        <div class="col">
          <label for="conclusion" class="col-form-label">Data de Conclusão</label>
          <input type="text"
                 id="conclusion"
                 placeholder=""
                 class="form-control"
                 bsDaterangepicker
                 [bsConfig]="{ isAnimated: true }">
        </div>
        <div class="col">
          <label for="sort" class="col-form-label">Ordernar Por</label>
          <select class="form-select" aria-label="Default select example" id="sort">
            <option selected>Open this select menu</option>
            <option value="1">One</option>
            <option value="2">Two</option>
            <option value="3">Three</option>
          </select>
        </div>

        <div class="col-sm-12">
          <button class="btn btn-primary" type="button">Buscar</button>
          <button class="btn btn-danger ms-2" type="reset">Limpar</button>
        </div>
      </div>
    </form>
  </accordion-group>
</accordion>


<div class="row pt-4">
  <div class="col-3 pt-4" *ngFor="let item of items">
    <div class="card task-item">
      <div class="card-body">
        <h5 class="card-title text-danger ">Em atraso</h5>
        <hr class="pt-0 mt-0">
        <div class="task-title">
          <div class="d-flex justify-content-between">
            <h4 class="">{{item.name}}</h4>
            <ng-container *ngTemplateOutlet="dropdown; context:{item: item}"></ng-container>
          </div>
          <h6 class="card-subtitle mb-2 text-body-secondary">Desrição</h6>
        </div>
        <div class="task-infos d-flex">
          <div class="p-1 ps-0 me-2 d-flex align-items-center">
              <i class="bi bi-list-ul fs-5 me-2"></i> Tarefas
          </div>
          <div class="p-1 ps-0 d-flex align-items-center">
            <i class="bi bi-clock fs-5 me-2"></i> 24 de Outubro, 10:15
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-12 pt-4 d-flex justify-content-center">
    <button class="btn btn-primary btn-lg px-5 btn-load-more">
      Carregar mais
    </button>
  </div>
</div>

<ng-template #dropdown let-item="item">
  <div class="btn-group" dropdown placement="bottom right">
    <button id="task-options" dropdownToggle type="button" class="btn btn-primary dropdown-toggle"
            aria-controls="dropdown-basic">
      <span class="bi bi-three-dots-vertical"></span>
    </button>
    <ul id="dropdown-basic" *dropdownMenu class="dropdown-menu dropdown-menu-right"
        role="menu" aria-labelledby="button-basic">
      <li role="menuitem">
        <a class="dropdown-item" (click)="onConclude(item)">
          <i class="bi bi-check-circle me-2"></i>
          Concluir
        </a>
      </li>
      <li role="menuitem">
        <a class="dropdown-item" (click)="onEdit(item)">
          <i class="bi bi-pencil-fill me-2"></i>
          Editar
        </a>
      </li>
      <li role="menuitem">
        <a class="dropdown-item" (click)="onDelete(item)">
          <i class="bi bi-trash3 me-2"></i>
          Remover
        </a>
      </li>
    </ul>
  </div>
</ng-template>
